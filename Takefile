install {
    set arguments [lrange $::argv 1 end]
    set files [glob ./src/*]
    if {$arguments ne ""} {set files $arguments} 
    foreach file $files {
        set destination ~/.local/bin/[file rootname [file tail $file]]
        file copy -force $file $destination 
        file attributes $destination -permissions +x
    }
}

lint {
    foreach file [glob ./src/*] {
        puts [exec nagelfar $file]
    }
}

test {
    set argv ""
    set argc 0
    source ./tests/all.tcl
}

ci {
    lint
    test
    build-packages
}

default {
    lint
    test
}
